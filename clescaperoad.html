<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <title>Escape Road</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background-color: #000; margin: 0; overflow: hidden; color: lime; }
        #unity-container { width: 100vw; height: 100vh; position: relative; }
        #unity-canvas { width: 100%; height: 100%; background: #000; }
        .game-nav { position: absolute; top: 10px; left: 10px; z-index: 100; }
        #loading-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: black; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 50;
        }
    </style>
</head>
<body>

    <div class="game-nav">
        <a href="download.html" class="btn-base" style="padding: 8px 15px;">‚Üê Back</a>
    </div>

    <div id="loading-overlay">
        <h2>DOWNLOADING GAME...</h2>
        <div id="progress-text">Connecting...</div>
    </div>

    <div id="unity-container">
        <canvas id="unity-canvas"></canvas>
    </div>

    <script>
        // UPDATED: Using a more reliable CDN structure for Unity WebGL
        const remoteBase = "https://cdn.jsdelivr.net/gh/sk1001-projects/escape-road@main/";
        
        const config = {
            dataUrl: remoteBase + "Build/escape-road.data",
            frameworkUrl: remoteBase + "Build/escape-road.framework.js",
            codeUrl: remoteBase + "Build/escape-road.wasm",
            streamingAssetsUrl: "StreamingAssets",
            companyName: "1games.io",
            productName: "Escape Road",
            productVersion: "2.0",
        };

        const canvas = document.querySelector("#unity-canvas");
        const overlay = document.querySelector("#loading-overlay");
        const progressText = document.querySelector("#progress-text");

        const script = document.createElement("script");
        script.src = remoteBase + "Build/escape-road.loader.js";
        
        script.onload = () => {
            createUnityInstance(canvas, config, (progress) => {
                progressText.innerHTML = Math.round(100 * progress) + "% Complete";
            }).then((unityInstance) => {
                overlay.style.display = "none";
            }).catch((error) => {
                console.error(error);
                progressText.innerHTML = "Error: File blocked. Please try hosting the site online.";
            });
        };

        document.body.appendChild(script);
    </script>
</body>
</html>
