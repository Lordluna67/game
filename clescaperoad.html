<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <title>Escape Road</title>
    <style>
        body { background: #000; margin: 0; overflow: hidden; }
        #unity-container { width: 100vw; height: 100vh; }
        #unity-canvas { width: 100%; height: 100%; background: #000; }
        .back-nav {
            position: absolute; top: 10px; left: 10px; z-index: 100;
            padding: 10px 15px; background: lime; color: black;
            text-decoration: none; font-family: sans-serif; font-weight: bold;
            border-radius: 4px;
        }
    </style>
</head>
<body>

    <a href="download.html" class="back-nav">‚Üê BACK</a>

    <div id="unity-container">
        <canvas id="unity-canvas" tabindex="1"></canvas>
    </div>

    <script>
        // Direct link to the working game engine
        const buildUrl = "https://cdn.jsdelivr.net/gh/sk1001-projects/escape-road@main/Build";
        const config = {
            dataUrl: buildUrl + "/escape-road.data",
            frameworkUrl: buildUrl + "/escape-road.framework.js",
            codeUrl: buildUrl + "/escape-road.wasm",
            streamingAssetsUrl: "StreamingAssets",
            companyName: "1games.io",
            productName: "Escape Road",
            productVersion: "2.0",
        };

        const canvas = document.querySelector("#unity-canvas");
        const script = document.createElement("script");
        script.src = buildUrl + "/escape-road.loader.js";
        
        script.onload = () => {
            createUnityInstance(canvas, config, (progress) => {
            }).then((unityInstance) => {
                // Focus the game automatically when it loads
                canvas.focus();
                
                // Keep the game focused even if the user clicks away and back
                window.addEventListener('click', () => {
                    canvas.focus();
                });
            });
        };

        // This is the most important part for Chromebooks:
        // It stops the browser from using Arrow Keys to scroll, 
        // so the car actually moves!
        window.addEventListener("keydown", function(e) {
            if(["Space","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].indexOf(e.code) > -1) {
                e.preventDefault();
            }
        }, false);

        document.body.appendChild(script);
    </script>
</body>
</html>
