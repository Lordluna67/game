<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <title>Escape Road</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background-color: #000; margin: 0; overflow: hidden; color: lime; }
        #unity-container { width: 100vw; height: 100vh; position: relative; }
        #unity-canvas { width: 100%; height: 100%; background: #000; }
        .game-nav { position: absolute; top: 10px; left: 10px; z-index: 100; }
        #loading-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: black; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 50;
        }
    </style>
</head>
<body>

    <div class="game-nav">
        <a href="download.html" class="btn-base" style="padding: 8px 15px;">‚Üê Back</a>
    </div>

    <div id="loading-overlay">
        <h2>CONNECTING TO SERVER...</h2>
        <div id="progress-text">Initializing Game Engine...</div>
    </div>

    <div id="unity-container">
        <canvas id="unity-canvas"></canvas>
    </div>

    <script>
        // We define the external path where the game is actually hosted
        const remotePath = "https://cdn.jsdelivr.net/gh/abisdbest/classroom.google.com@45b2d69c626dc365753f6922d2c48c4075683ef5/drive.google.com/escape%20road/";
        
        const config = {
            dataUrl: remotePath + "TemplateData/data.unityweb",
            frameworkUrl: remotePath + "TemplateData/framework.js.unityweb",
            codeUrl: remotePath + "TemplateData/wasm.unityweb",
            streamingAssetsUrl: "StreamingAssets",
            companyName: "1games.io",
            productName: "Escape Road",
            productVersion: "2.0",
        };

        const canvas = document.querySelector("#unity-canvas");
        const overlay = document.querySelector("#loading-overlay");
        const progressText = document.querySelector("#progress-text");

        // Dynamically load the Unity Loader from the remote server
        const script = document.createElement("script");
        script.src = remotePath + "TemplateData/loader.js";
        
        script.onload = () => {
            createUnityInstance(canvas, config, (progress) => {
                progressText.innerHTML = "Downloading: " + Math.round(100 * progress) + "%";
            }).then((unityInstance) => {
                overlay.style.display = "none";
            }).catch((message) => {
                console.error(message);
                progressText.innerHTML = "Error: File blocked or not found.";
            });
        };

        document.body.appendChild(script);
    </script>
</body>
</html>
